<?xml version="1.0" encoding="utf-8" ?>

<!--

Z2X-Programmer
Copyright (C) 2024 - 2026
PeterK78

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see:

https://github.com/PeterK78/Z2X-Programmer?tab=GPL-3.0-1-ov-file.
    
-->
<mct:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converter="clr-namespace:Z2XProgrammer.Converter"
             x:Class="Z2XProgrammer.Popups.PopUpCommandStation"
             xmlns:mct="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui"
             xmlns:strings="clr-namespace:Z2XProgrammer.Resources.Strings"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             BackgroundColor="{AppThemeBinding Light={StaticResource FrameBackgroundColor_Light}, Dark={StaticResource FrameBackgroundColor_Dark}}"
             CanBeDismissedByTappingOutsideOfPopup="False"
             Padding="0,0,0,0"
             x:Name="ThisPage"
             >

    <VerticalStackLayout WidthRequest="300">

        <HorizontalStackLayout>
            <Image Margin="0,0,10,0" Source="{AppThemeBinding Light=ic_fluent_commandstation_24_regular.png, Dark=ic_fluent_commandstation_24_dark.png}"  VerticalOptions="Center"></Image>
            <Label Text="{x:Static strings:AppResources.FameSettingsZ21Title}" Style="{StaticResource Z2XProgrammerLabelHeading2Style}" VerticalOptions="Center" VerticalTextAlignment="Center" HorizontalOptions="Start" ></Label>
        </HorizontalStackLayout>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
            </Grid.RowDefinitions>

            <!-- The name of the command station -->
            <Label Grid.Row="0" Grid.Column="0" Text="Name" VerticalOptions="Center" Margin="0,10,0,0"></Label>
            <Entry x:Name="NameEntry" Grid.Row="0" Grid.Column="1"  Margin="10,10,0,0"  WidthRequest="170" VerticalOptions="Center" VerticalTextAlignment="Center" HorizontalTextAlignment="End" HorizontalOptions="End" ClearButtonVisibility="WhileEditing"/>

            <!-- The IP address of the command station -->
            <Label Grid.Row="1" Grid.Column="0" Text="IP Adresse" VerticalOptions="Center" Margin="0,10,0,0"></Label>
            <Entry x:Name="IPAddressEntry" Grid.Row="1" Grid.Column="1" Margin="0,10,0,0"  WidthRequest="170" VerticalOptions="Center" VerticalTextAlignment="Center" HorizontalTextAlignment="End" HorizontalOptions="End" Placeholder="{x:Static strings:AppResources.FrameSettingsZ21IPAddressPlaceholder}" ClearButtonVisibility="WhileEditing">
                <Entry.Behaviors>
                    <toolkit:TextValidationBehavior 
                        BindingContext="{Binding BindingContext, Source={x:Reference ThisPage}, x:DataType=ContentPage}"
                        InvalidStyle="{StaticResource Z2XInvalidEntry}"
                        ValidStyle="{StaticResource Z2XValidEntry}"
                        Flags="ValidateOnValueChanged"
                        MinimumLength="5"
                        MaximumLength="15" />
                </Entry.Behaviors>
            </Entry>

            <!-- The buttons at the bottom -->
            <HorizontalStackLayout Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" HorizontalOptions="End" Margin="0,20,0,0" >

                <!-- The OK button -->
                <Button WidthRequest="130"  Style="{StaticResource Z2XProgrammerStandardButtonStyle}"  Margin="0,0,0,0" x:Name="OKButton" Clicked="OKButton_Clicked" Text="{x:Static strings:AppResources.OK}" VerticalOptions="End"></Button>

                <!-- The Cancel button -->
                <Button  WidthRequest="130"  Style="{StaticResource Z2XProgrammerStandardButtonStyle}"  Margin="10,0,0,0" x:Name="CancelButton" Clicked="CancelButton_Clicked" Text="{x:Static strings:AppResources.PopupButtonCancel}" VerticalOptions="End"></Button>

            </HorizontalStackLayout>

        </Grid>

    </VerticalStackLayout>
</mct:Popup>